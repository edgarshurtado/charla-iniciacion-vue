(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1062:function(e,s,n){"use strict";n.r(s);var t=n(16),i=n.n(t),o=n(17),a=n.n(o),r=n(22),c=n.n(r),u=n(23),l=n.n(u),d=n(24),f=n.n(d),m=n(5),p=n.n(m),g=n(0),D=n.n(g),h=n(96);s.default=function(e){return function(s){var n,t=function(n){function t(){return i()(this,t),c()(this,l()(t).apply(this,arguments))}return f()(t,n),a()(t,[{key:"componentDidMount",value:function(){window.newrelic&&window.newrelic.setCurrentRouteName(e),Object(h.gtmPush)({event:"interactiveRouteChange","page.type":this.props.pageType||e})}},{key:"render",value:function(){return D.a.createElement(s,this.props)}}]),t}(g.Component);return p()(t,"displayName","WithPageName(".concat((n=s).displayName||n.name||"Component",")")),t}}},1079:function(e,s,n){"use strict";n.d(s,"b",(function(){return h})),n.d(s,"h",(function(){return k})),n.d(s,"c",(function(){return M})),n.d(s,"d",(function(){return v})),n.d(s,"p",(function(){return E})),n.d(s,"n",(function(){return w})),n.d(s,"v",(function(){return S})),n.d(s,"r",(function(){return _})),n.d(s,"s",(function(){return L})),n.d(s,"i",(function(){return j})),n.d(s,"t",(function(){return A})),n.d(s,"q",(function(){return y})),n.d(s,"k",(function(){return T})),n.d(s,"l",(function(){return x})),n.d(s,"m",(function(){return R})),n.d(s,"j",(function(){return P})),n.d(s,"u",(function(){return B})),n.d(s,"x",(function(){return V})),n.d(s,"g",(function(){return F})),n.d(s,"f",(function(){return U})),n.d(s,"a",(function(){return J})),n.d(s,"e",(function(){return W})),n.d(s,"o",(function(){return G})),n.d(s,"w",(function(){return q})),n.d(s,"y",(function(){return z}));var t=n(6),i=n.n(t),o=n(1),a=n(2),r=n(62),c=n(41),u=n(53),l=n(325),d=n(267),f=n(313),m=n(179),p=n(1136),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.EMPTY_OBJ,s=e.self;if(!s||!s.actions)return e;var n=function(e){return s.actions.indexOf(e)>-1};return i()({},e,{following:s.followed,self:i()({},s,{canUnlike:n("unlike"),canLike:n("like"),canComment:n("comment"),canDelete:n("delete"),canFollow:n("follow"),canUnfollow:n("unfollow")})})},D=function(e){return e.api[m.a]},h=Object(o.createSelector)(D,(function(e){var s=Object(a.getValue)(e,a.EMPTY_OBJ);return Object(a.hasValidRespValue)(s)?g(s):a.EMPTY_OBJ})),k=Object(o.createSelector)(D,(function(e){return"Not Found"===(e||{}).error})),M=Object(o.createSelector)(D,(function(e){return Object(a.hasRespErrors)(e)&&"Not Found"!==(e||{}).error})),v=Object(o.createSelector)((function(e){return e[d.a]||a.EMPTY_OBJ}),(function(e){return e.followers||a.EMPTY_OBJ})),b=function(e){return e.api[f.a]||{}},C=function(e){var s=Object(a.getValue)(e,a.EMPTY_AR);return Object(a.hasValidRespValue)(s)?s.map(g):a.EMPTY_AR},E=Object(o.createSelector)(b,C),w=Object(o.createSelector)(b,(function(e){return parseInt((e.meta||{}).totalCount||0,10)})),O=function(e){return e.api["list_".concat(f.a)]||{}},S=Object(o.createSelector)(O,C),_=Object(o.createSelector)(b,a.hasLoaded),L=Object(o.createSelector)(O,a.hasLoaded),j=Object(o.createSelector)(b,a.hasRespErrors),A=(Object(o.createSelector)(b,(function(e){return Object(a.hasValidRespValue)(e)&&e.meta?parseInt(e.meta.totalCount,10):0})),Object(o.createSelector)(a.getInFlight,(function(e){return e.includes(f.a)}))),y=Object(o.createSelector)(b,(function(e){return Object(a.hasValidRespValue)(e)&&e.meta&&(e.meta.link||{}).next||""})),N=function(e){return e.api[p.e]},T=Object(o.createSelector)(N,(function(e){var s=Object(a.getValue)(e);return Object(a.hasValidRespValue)(e)?g(s):a.EMPTY_OBJ})),x=Object(o.createSelector)(N,(function(e){return Object(a.hasRespErrors)(e)?e.value.errors.reduce((function(e,s){return s.code}),""):""})),R=Object(o.createSelector)((function(e){return e.api[p.a]}),(function(e){var s=Object(a.getValue)(e);return Object(a.hasValidRespValue)(e)?{id:e.meta.endpoint.split("/").pop()}:s})),P=Object(o.createSelector)((function(e){return e.api[p.b]}),(function(e){if(Object(a.isEmpty)(e))return a.EMPTY_OBJ;if(Object(a.hasValidRespValue)(e)&&204===e.meta.statusCode){var s=e.meta.endpoint,n=/discussions\/([^/]+)\/(?:un)?follow/gi.exec(s);return{discussionId:null===n?"":n[1],isFollowing:s.endsWith("/follow")}}return{discussionId:"",isFollowing:!1,error:e.error}})),I=function(e,s){if(Object(a.isEmpty)(e))return a.EMPTY_OBJ;var n=e.meta.endpoint,t=/discussions\/([^/]+)\/?like/gi.exec(n),i=null===t?"":t[1];return Object(a.hasValidRespValue)(e)&&204===e.meta.statusCode?{discussionId:i,isLiking:s}:{discussionId:i,isLiking:s,error:e.error}},B=Object(o.createSelector)((function(e){return e.api[p.d]}),(function(e){return I(e,!0)})),V=Object(o.createSelector)((function(e){return e.api[p.f]}),(function(e){return I(e,!1)})),F=Object(o.createSelector)((function(e){return e.api[p.c]}),(function(e){return Object(a.getValue)(e,a.EMPTY_AR)})),Y=function(e){return e.api[f.b]||a.EMPTY_OBJ},U=Object(o.createSelector)(Y,(function(e){return Object(a.getProperty)(e,"preferences",a.EMPTY_OBJ)})),J=Object(o.createSelector)(U,(function(e){return e.any_member_can_post||null})),H=Object(o.createSelector)(Y,(function(e){return Object(a.getProperty)(e,"self",a.EMPTY_OBJ)})),W=Object(o.createSelector)(H,(function(e){return e.permissions||a.EMPTY_AR})),G=Object(o.createSelector)(Y,a.hasRespErrors),q=Object(o.createSelector)((function(){return function(e,s){var n=s.group,t=void 0===n?a.EMPTY_OBJ:n;return e.api["".concat(f.c,"_").concat(t.urlname)]}}),a.hasRespErrors),z=function(){return Object(o.createSelector)(c.m,(function(e){return Object(r.a)(e,"".concat(Object(u.a)()).concat(l.a[0].path))}))}},1080:function(e,s,n){"use strict";var t=n(0),i=n.n(t),o=n(26),a=n(28),r=n(1),c=n(312),u=n.n(c),l=n(32),d=n.n(l),f=n(14),m=n(1091),p=n.n(m),g=Object(r.createStructuredSelector)({referrerPathname:f.getReferrerPathname}),D=Object(a.compose)(Object(o.connect)(g));s.a=D((function(e){var s=e.children,n=e.timeout,t=void 0===n?400:n,o=e.referrerPathname,a=Boolean(o);return i.a.createElement(d.a,{styles:[p.a]},i.a.createElement(u.a,{in:!0,appear:a,timeout:t,classNames:{appear:p.a["transition-appear"],appearActive:p.a["transition-appear-active"],enter:p.a["transition-enter"],enterActive:p.a["transition-enter-active"]}},i.a.createElement("div",null,s)))}))},1091:function(e,s,n){var t=n(1092),i=n(46);"string"==typeof t&&(t=[[e.i,t,""]]),e.exports=t.locals||{},e.exports._getContent=function(){return t},e.exports._getCss=function(){return t.toString()},e.exports._insertCss=function(e){return i(t,e)}},1092:function(e,s,n){(s=e.exports=n(45)(!1)).push([e.i,"._withTransition-module_transition-appear__28GqG{opacity:.01}._withTransition-module_transition-appear-active__34x1N{opacity:1;-webkit-transition:opacity .4s ease-in;transition:opacity .4s ease-in}._withTransition-module_transition-enter__1LSgB{opacity:.01}._withTransition-module_transition-enter-active__3hW7d{opacity:1;-webkit-transition:opacity .4s ease-in;transition:opacity .4s ease-in}",""]),s.locals={"transition-appear":"_withTransition-module_transition-appear__28GqG","transition-appear-active":"_withTransition-module_transition-appear-active__34x1N","transition-enter":"_withTransition-module_transition-enter__1LSgB","transition-enter-active":"_withTransition-module_transition-enter-active__3hW7d"}},1136:function(e,s,n){"use strict";n.d(s,"b",(function(){return t})),n.d(s,"a",(function(){return i})),n.d(s,"e",(function(){return o})),n.d(s,"d",(function(){return a})),n.d(s,"f",(function(){return r})),n.d(s,"c",(function(){return c}));var t="discussionFollow",i="discussionDelete",o="postDiscussion",a="discussionLike",r="discussionUnlike",c="discussionLikers"},1233:function(e,s,n){"use strict";var t={};n.r(t),n.d(t,"postDiscussion",(function(){return V})),n.d(t,"deleteCommunication",(function(){return F})),n.d(t,"followDiscussion",(function(){return U})),n.d(t,"unfollowDiscussion",(function(){return J})),n.d(t,"likeDiscussion",(function(){return H})),n.d(t,"unlikeDiscussion",(function(){return W})),n.d(t,"discussionLikersQuery",(function(){return G}));var i=n(12),o=n.n(i),a=n(18),r=n.n(a),c=n(6),u=n.n(c),l=n(16),d=n.n(l),f=n(17),m=n.n(f),p=n(22),g=n.n(p),D=n(23),h=n.n(D),k=n(9),M=n.n(k),v=n(24),b=n.n(v),C=n(5),E=n.n(C),w=n(0),O=n(26),S=n(31),_=n(28),L=n(1),j=n(3),A=n(8),y=n.n(A),N=n(1610),T=n(2),x=n(60),R=n(152),P=n(37),I=n(25),B=n(1136),V=function(e){var s=e.urlname,n=e.description;return I.post({endpoint:"".concat(s,"/discussions"),ref:B.e,params:{urlname:s,description:n}})},F=function(e){var s=e.urlname,n=e.discussionId;return I.del({endpoint:"".concat(s,"/discussions/").concat(n),ref:B.a})},Y=function(e){return function(s){var n=s.urlname,t=s.discussionId;return I.post({endpoint:"".concat(n,"/discussions/").concat(t,"/").concat(e),ref:B.b})}},U=Y("follow"),J=Y("unfollow"),H=function(e){var s=e.urlname,n=e.discussionId;return I.post({endpoint:"".concat(s,"/discussions/").concat(n,"/like"),ref:B.d})},W=function(e){var s=e.urlname,n=e.discussionId;return I.del({endpoint:"".concat(s,"/discussions/").concat(n,"/like"),ref:B.f})},G=function(e){var s=e.urlname,n=e.discussionId;return I.get({type:"members",endpoint:"".concat(s,"/discussions/").concat(n,"/likers"),ref:B.c})},q=n(1079),z=function(e){return e.reduce((function(e,s){return e[s.id]=(s.self||T.EMPTY_OBJ).followed||!1,e}),{})},K=function(e){return e.reduce((function(e,s){return e[s.id]=(s.self||T.EMPTY_OBJ).liked||!1,e}),{})},Q=Object(j.defineMessages)({discussionError:{id:"discussionAdd.genericAddError",defaultMessage:"Sorry, something went wrong. Please try again later."},discussionLongContentError:{id:"discussionAdd.addLongContentError",defaultMessage:"Sorry, your post was too long. Please try again."}}),X=Object(L.createStructuredSelector)({pagedDiscussions:q.v,addedDiscussion:q.k,addedDiscussionErrors:q.l,deletedDiscussion:q.m,followDiscussion:q.j,likeDiscussion:q.u,groupDiscussionCount:q.n,unlikedDiscussion:q.x,urlname:P.ab,likers:q.g}),Z=function(e){return{discussionsHandlers:Object(_.bindActionCreators)(t,e)}};s.a=function(e){var s=function(s){function n(e){var s;d()(this,n),s=g()(this,h()(n).call(this,e)),E()(M()(s),"postDiscussionAction",(function(e){if(!e)return!1;var n=s.props,t=n.discussionsHandlers,i=n.urlname;return s.setState((function(){return{addingDiscussion:{isPosting:!0}}})),t.postDiscussion({description:e.trim(),urlname:i})})),E()(M()(s),"deleteDiscussionAction",(function(e){var n=s.props,t=n.discussionsHandlers,i=n.urlname;t.deleteCommunication({urlname:i,discussionId:e})})),E()(M()(s),"followDiscussionAction",(function(e,n){var t=s.props,i=t.discussionsHandlers,o=t.urlname;(n?i.unfollowDiscussion:i.followDiscussion)({urlname:o,discussionId:e})})),E()(M()(s),"likeDiscussionAction",(function(e,n){var t=s.props,i=t.discussionsHandlers,o=t.urlname;s.setState((function(s){return{likingDiscussions:u()({},s.likingDiscussions,E()({},e,!n))}})),(n?i.unlikeDiscussion:i.likeDiscussion)({urlname:o,discussionId:e})})),E()(M()(s),"loadDiscussionLikersAction",(function(e){var n=e.discussionId,t=s.props,i=t.discussionsHandlers,o=t.urlname;i.discussionLikersQuery({urlname:o,discussionId:n})}));var t=e.discussion?[e.discussion]:e.discussions||[],i=z(t),o=K(t);return s.state={discussions:t,pagedDiscussions:T.EMPTY_AR,totalDiscussionsCount:e.groupDiscussionCount,addingDiscussion:{isPosting:!1},followingDiscussions:i,likingDiscussions:o,lastLikedDiscussion:T.EMPTY_OBJ,lastUnlikedDiscussion:T.EMPTY_OBJ,lastDeletedDiscussionId:0},s}return b()(n,s),m()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var s=this,n=this.props.featureFlags.includes(R.f),t=e.groupDiscussionCount;t!==this.props.groupDiscussionCount&&this.setState((function(){return{totalDiscussionsCount:t}}));var i=e.pagedDiscussions;if(i&&this.state.pagedDiscussions!==i){var o=i.filter((function(e){return!s.state.discussions.find((function(s){return s.id===e.id}))})),a=z(o),c=K(o);this.setState((function(e){return{pagedDiscussions:i,discussions:[].concat(r()(e.discussions),r()(o)),followingDiscussions:u()({},e.followingDiscussions,a),likingDiscussions:u()({},e.likingDiscussions,c)}}))}var l=e.addedDiscussion,d=e.addedDiscussionErrors,f=void 0===d?"":d;if(this.props.addedDiscussion!==l&&!Object(T.isEmpty)(l)||f)if(Object(T.hasValidValue)(l))this.setState((function(e){return{totalDiscussionsCount:e.totalDiscussionsCount+1,addingDiscussion:{isPosting:!1},discussions:r()(new Set([u()({},l,{like_count:0})].concat(r()(e.discussions)))),likingDiscussions:u()({},e.likingDiscussions,E()({},l.id,!1)),followingDiscussions:u()({},e.followingDiscussions,E()({},l.id,(l.self||T.EMPTY_OBJ).followed||!1))}}));else{var m="content_error"===f?this.props.intl.formatMessage(Q.discussionLongContentError):this.props.intl.formatMessage(Q.discussionError);this.setState((function(){return{addingDiscussion:{isPosting:!1,errors:""!==f,errorMessage:m}}}))}var p=e.deletedDiscussion;if(this.props.deletedDiscussion!==p&&!Object(T.isEmpty)(p)&&Object(T.hasValidValue)(p)){var g=this.state.totalDiscussionsCount-1;this.setState((function(e){return{totalDiscussionsCount:g,discussions:e.discussions.filter((function(e){return e.id!==p.id})),lastDeletedDiscussionId:p.id}}))}var D=e.followDiscussion;this.props.followDiscussion===D||Object(T.isEmpty)(D)||Object(T.hasValidValue)(e.followDiscussion)&&""!==e.followDiscussion.discussionId&&this.setState((function(e){return{followingDiscussions:u()({},e.followingDiscussions,E()({},D.discussionId,D.isFollowing))}}));var h=e.likeDiscussion;h&&this.state.lastLikedDiscussion!==h&&(Object(T.hasValidValue)(h)?this.setState((function(e){return{likingDiscussions:u()({},e.likingDiscussions,E()({},h.discussionId,h.isLiking)),lastLikedDiscussion:h}})):this.setState((function(e){var s=e.likingDiscussions?!e.likingDiscussions[h.discussionId]:!h.isLiking;return{likingDiscussions:u()({},e.likingDiscussions,E()({},h.discussionId,s))}})));var k=e.unlikedDiscussion;if(this.state.lastUnlikedDiscussion!==k&&Object(T.hasValidValue)(k)&&this.setState((function(s){return{likingDiscussions:u()({},s.likingDiscussions,E()({},"".concat(e.unlikedDiscussion.discussionId),!1)),lastUnlikedDiscussion:k}})),!n){var M=e.discussions;if(M&&this.props.discussions!==M){var v=z(M),b=K(M);this.setState((function(){return{discussions:M,followingDiscussions:v,likingDiscussions:b,pagedDiscussions:T.EMPTY_AR}}))}}}},{key:"render",value:function(){return w.createElement(e,o()({},this.props,{addingDiscussion:this.state.addingDiscussion,followingDiscussions:this.state.followingDiscussions,followDiscussionAction:this.followDiscussionAction,discussions:this.state.discussions,discussionsHandlers:this.props.discussionsHandlers,deleteDiscussionAction:this.deleteDiscussionAction,lastDeletedDiscussionId:this.state.lastDeletedDiscussionId,loadDiscussionLikersAction:this.loadDiscussionLikersAction,postDiscussionAction:this.postDiscussionAction,likingDiscussions:this.state.likingDiscussions,likeDiscussionAction:this.likeDiscussionAction,totalDiscussionsCount:this.state.totalDiscussionsCount,featureFlags:this.props.featureFlags}))}}]),n}(w.Component),n=e.displayName||e.name||"Component";return s.displayName="WithDiscussionActions(".concat(n,")"),Object(S.compose)(y()(N,!0),Object(x.default)(R.f),Object(O.connect)(X,Z))(s)}},1352:function(e,s,n){"use strict";var t=n(12),i=n.n(t),o=n(16),a=n.n(o),r=n(17),c=n.n(r),u=n(22),l=n.n(u),d=n(23),f=n.n(d),m=n(9),p=n.n(m),g=n(24),D=n.n(g),h=n(5),k=n.n(h),M=n(0),v=n.n(M),b=n(67),C=n.n(b),E=n(148),w=n.n(E),O=n(4),S=n.n(O),_=n(31),L=n(55),j=n(3),A=n(90),y=n.n(A),N=n(220),T=n.n(N),x=n(83),R=n.n(x),P=n(68),I=n.n(P),B=n(27),V=n.n(B),F=n(21),Y=n.n(F),U=n(15),J=n.n(U),H=n(13),W=n.n(H),G=n(10),q=n.n(G),z=n(253),K=n.n(z),Q=n(219),X=n.n(Q),Z=n(8),$=n.n(Z),ee=n(1608),se=n(333),ne=n(384),te=n(63),ie=Object(j.defineMessages)({discussionCardXReplies:{id:"discussionCard.numComments",defaultMessage:"{NUM_COMMENTS} replies"},discussionCardOneReply:{id:"discussionCard.oneComment",defaultMessage:"{NUM_COMMENTS} reply"},discussionCardDelete:{id:"discussionCard.delete",defaultMessage:"Delete"},discussionCardFollow:{id:"discussionCard.follow",defaultMessage:"Turn on updates"},discussionCardUnfollow:{id:"discussionCard.unfollow",defaultMessage:"Turn off updates"},discussionCardReport:{id:"discussionCard.report",defaultMessage:"Report"},discussionCardReply:{id:"discussionCard.reply",defaultMessage:"Reply"},discussionCardSeeMore:{id:"discussionCard.seeMore",defaultMessage:"See more"},overflowIconLabel:{id:"discussionCard.overflowIconLabel",defaultMessage:"Additional discussion options"},discussionLikeActionLabel:{id:"discussionCard.discussionLikeActionLabel",defaultMessage:"Like discussion"},pluralLikes:{id:"discussionCard.pluralLikes",defaultMessage:"{LIKE_COUNT} likes"},singularLike:{id:"discussionCard.singularLike",defaultMessage:"1 like"},likeActionText:{id:"discussionCard.likeActionText",defaultMessage:"Like"},unlikeActionText:{id:"discussionCard.unlikeActionText",defaultMessage:"Unlike"},formerMember:{id:"discussionCard.formerMember",defaultMessage:"Former member"}}),oe=n(50),ae=n.n(oe),re=n(1609),ce=Object(j.defineMessages)({deleteModalTitle:{id:"deleteDiscussionModal.areYouSure",defaultMessage:"Are you sure you want to delete this discussion?"},confirmButton:{id:"deleteDiscussionModal.confirmButton",defaultMessage:"Delete"},cancelButton:{id:"deleteDiscussionModal.cancelButton",defaultMessage:"Not now"}}),ue=$()(re)((function(e){var s=e.onDismiss,n=e.onConfirm;return v.a.createElement(ae.a,{className:"modal--deleteDiscussion",onDismiss:s,fixed:!0,closeArea:!1},v.a.createElement("h1",{className:"align--center padding--top margin--top"},v.a.createElement(j.FormattedMessage,ce.deleteModalTitle)),v.a.createElement(W.a,{className:"padding--all"},v.a.createElement(q.a,null,v.a.createElement(V.a,{className:"button--cancelDeleteDiscussion",onClick:s,fullWidth:!0,neutral:!0},v.a.createElement(j.FormattedMessage,ce.cancelButton))),v.a.createElement(q.a,null,v.a.createElement(V.a,{className:"button--confirmDeleteDiscussion",onClick:n,fullWidth:!0},v.a.createElement(j.FormattedMessage,ce.confirmButton)))))})),le=n(311),de=n(139),fe="discussion-card",me="".concat(fe,"--avatar"),pe="".concat(fe,"--date"),ge="".concat(fe,"--overflowMenu-delete"),De="".concat(fe,"--desc"),he="".concat(fe,"--overflowMenu-follow"),ke="".concat(fe,"--overflowMenu-unfollow"),Me="".concat(fe,"--link"),ve="".concat(fe,"--like"),be="".concat(fe,"--reply"),Ce="".concat(fe,"--likeText"),Ee="".concat(fe,"--name"),we="".concat(fe,"--numComments"),Oe="".concat(fe,"--overflowMenu"),Se="".concat(fe,"--overflowMenu-report"),_e="".concat(Me,"--desc"),Le=function(e){function s(e){var n;return a()(this,s),n=l()(this,f()(s).call(this,e)),k()(p()(n),"onDismissLikeModal",(function(){n.setState((function(){return{showLikeModal:!1}}))})),k()(p()(n),"onShowLikeModal",(function(){var e=n.props;(0,e.onLoadLikersAction)({discussionId:e.discussion.id}),n.setState((function(){return{showLikeModal:!0}}))})),k()(p()(n),"onToggleDropdown",(function(e){e&&e.preventDefault(),n.setState((function(e){return{isDropdownActive:!e.isDropdownActive}}))})),k()(p()(n),"deleteDiscussion",(function(){var e=n.props.discussion;n.props.deleteDiscussionAction(e.id),n.toggleDeleteModal(!1)})),k()(p()(n),"followDiscussion",(function(){var e=n.props,s=e.discussion,t=e.isFollowing;n.props.followDiscussionAction(s.id,t)})),k()(p()(n),"openReportAction",(function(){n.setState({showReportModal:!0})})),k()(p()(n),"closeReportAction",(function(){n.setState({showReportModal:!1})})),k()(p()(n),"likeDiscussion",(function(){var e=n.props.discussion;n.props.likeDiscussionAction(e.id,n.state.isLiked)})),k()(p()(n),"toggleDeleteModal",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({showDeleteModal:e})})),n.state={showDeleteModal:!1,showLikeModal:!1,showReportModal:!1,likeCount:e.likeCount||0,isLiked:e.isLiked||!1,isDropdownActive:!1},n}return D()(s,e),c()(s,[{key:"render",value:function(){var e=this,s=this.props,n=s.className,t=s.discussion,o=s.commentCount,a=s.intl,r=s.isFollowing,c=s.urlname,u=s.isClickable,l=s.isCollapsible,d=s.likers,f=s.media;if(void 0===t.id)return!1;var m=v.a.createElement("span",{className:r?ke:he,onClick:this.followDiscussion},r?v.a.createElement(j.FormattedMessage,ie.discussionCardUnfollow):v.a.createElement(j.FormattedMessage,ie.discussionCardFollow)),p=v.a.createElement("span",{className:ge,onClick:function(){return e.toggleDeleteModal(!0)}},v.a.createElement(j.FormattedMessage,ie.discussionCardDelete)),g=v.a.createElement("span",{className:Se,onClick:this.openReportAction},v.a.createElement(j.FormattedMessage,ie.discussionCardReport)),D=[(t.self||{}).canDelete?p:null,(t.self||{}).canFollow||(t.self||{}).canUnfollow?m:null,g].filter((function(e){return e})),h=D.length>0,k=Boolean(t.creator.id),M=k?"a":"div",b=k?{href:Object(de.generateGroupMemberProfileUrl)(c,t.creator.id)}:{},E=Object(le.b)(c,t.id,"chat"),w=Boolean(t.self&&(t.self.canLike||t.self.canUnlike)),O=this.state.likeCount>0,_=w,A=S()(ve,"button--reset","margin--none","padding--none","display--inlineBlock","comment-item-likeButton",{"comment-item-likeButton--active text--red":this.state.isLiked,"comment-item-likeButton--inactive":!this.state.isLiked}),y=S()(Ce,{"text--red":this.state.isLiked},{"text--secondary":!this.state.isLiked},"display--inlineBlock"),N=this.state.likeCount>1?a.formatMessage(ie.pluralLikes,{LIKE_COUNT:this.state.likeCount}):a.formatMessage(ie.singularLike),x=this.state.isLiked?a.formatMessage(ie.unlikeActionText):a.formatMessage(ie.likeActionText),P=this.state.isLiked?"heart":"heart-outline",B=v.a.createElement(X.a,{className:A,id:"discussion-like_".concat(t.id),onChange:this.likeDiscussion,name:"discussion-like",value:"like",checked:this.state.isLiked,labelClassName:"margin--none",disabled:!w,reset:!0},v.a.createElement(Y.a,{className:"flush--all",shape:P,size:"xs","aria-label":a.formatMessage(ie.discussionLikeActionLabel)}),f.isAtMediumUp&&v.a.createElement("p",{className:S()(y,"padding--left-half")},x)),F=v.a.createElement(V.a,{className:y,onClick:this.onShowLikeModal,reset:!0},N),U=[];O&&U.push(F),_&&U.push(B);var H=t.description,G=T()(H,{target:"_blank"}).split("\n").join("<br/>"),z=u?"a":"div",Q=u?{href:E}:{},Z=u?Me:"",$=u?S()(Me,_e):"";return v.a.createElement("div",null,v.a.createElement(te.ReportModal,{isVisible:this.state.showReportModal,onDismiss:this.closeReportAction},v.a.createElement(te.GroupDiscussionReport,{id:t.id,onComplete:this.closeReportAction})),this.state.showDeleteModal&&v.a.createElement(ue,{onDismiss:function(){return e.toggleDeleteModal(!1)},onConfirm:this.deleteDiscussion}),this.state.showLikeModal&&v.a.createElement(L.Portal,null,v.a.createElement(ne.a,{onDismiss:this.onDismissLikeModal,likers:d,urlname:c})),v.a.createElement("div",{className:S()(fe,"card display--block border--none",n)},v.a.createElement(J.a,null,v.a.createElement(W.a,null,v.a.createElement(q.a,{shrink:!0},v.a.createElement(M,b,v.a.createElement(I.a,{className:me,member:t.creator}))),v.a.createElement(q.a,{shrink:!0},v.a.createElement(M,i()({},b,{className:S()(Ee,"text--small text--bold display--block")}),0===t.creator.id?a.formatMessage(ie.formerMember):t.creator.name)),v.a.createElement(q.a,null,v.a.createElement(C.a,{to:E,className:Me},v.a.createElement("p",{className:S()(pe,"text--secondary text--small")},"•",v.a.createElement("span",{className:"display--inline padding--left-half"},v.a.createElement(j.FormattedDate,{value:t.created,month:"short",day:"numeric"}))))),h&&v.a.createElement(q.a,{shrink:!0,className:"align--right text--secondary"},v.a.createElement(R.a,{className:Oe,align:"right",trigger:v.a.createElement(Y.a,{shape:"overflow",size:"s","aria-label":a.formatMessage(ie.overflowIconLabel)}),menuItems:D,manualToggle:this.onToggleDropdown,onClick:this.onToggleDropdown,isActive:this.state.isDropdownActive})))),v.a.createElement(z,i()({},Q,{className:$}),v.a.createElement(J.a,null,l?v.a.createElement(se.a,{className:"".concat(De," text--wrapNice"),dangerouslySetInnerHTML:{__html:G},maxLines:3,readMoreText:a.formatMessage(ie.discussionCardSeeMore)}):v.a.createElement("p",{className:"".concat(De," text--wrapNice"),dangerouslySetInnerHTML:{__html:G}}))),v.a.createElement(J.a,null,v.a.createElement(W.a,null,v.a.createElement(q.a,null,v.a.createElement(z,i()({},Q,{className:S()("display--inlineFlex flush--all span--100",Z)}),o>0&&v.a.createElement("p",{className:S()(we,"text--small","text--secondary","padding--right")},1===o&&v.a.createElement(j.FormattedMessage,i()({},ie.discussionCardOneReply,{values:{NUM_COMMENTS:o.toString()}})),o>1&&v.a.createElement(j.FormattedMessage,i()({},ie.discussionCardXReplies,{values:{NUM_COMMENTS:o.toString()}}))),(t.self||{}).canComment&&u&&v.a.createElement("p",{className:"text--small text--bold ".concat(be)},v.a.createElement(j.FormattedMessage,ie.discussionCardReply)))),v.a.createElement(q.a,{shrink:!0},v.a.createElement(K.a,{items:U,separator:"·",className:S()({"text--red":this.state.isLiked})}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,s){var n=e.isLiked,t=s;return s.isLiked!==n&&(t.isLiked=n,t.likeCount=n?t.likeCount+1:t.likeCount-1),t}}]),s}(v.a.PureComponent);k()(Le,"defaultProps",{commentCount:0});var je=Object(_.compose)(y.a,$()(ee,!0),w.a)(Le);s.a=je},1608:function(e){e.exports=JSON.parse('{"es-ES":{"discussionCard.numComments":"{NUM_COMMENTS} respuestas","discussionCard.oneComment":"{NUM_COMMENTS} respuesta","discussionCard.delete":"Borrar","discussionCard.follow":"Activar las actualizaciones","discussionCard.unfollow":"Desactivar las actualizaciones","discussionCard.report":"Denunciar","discussionCard.reply":"Responder","discussionCard.seeMore":"Ver más","discussionCard.overflowIconLabel":"Opciones adicionales de conversación","discussionCard.discussionLikeActionLabel":"Dar me gusta a la conversación","discussionCard.pluralLikes":"A {LIKE_COUNT} personas les gusta","discussionCard.singularLike":"A 1 persona le gusta","discussionCard.likeActionText":"Me gusta","discussionCard.unlikeActionText":"Ya no me gusta","discussionCard.formerMember":"Antiguo miembro"}}')},1609:function(e){e.exports=JSON.parse('{"es-ES":{"deleteDiscussionModal.areYouSure":"¿Seguro que quieres borrar esta conversación?","deleteDiscussionModal.confirmButton":"Borrar","deleteDiscussionModal.cancelButton":"Más tarde"}}')},1610:function(e){e.exports=JSON.parse('{"es-ES":{"discussionAdd.genericAddError":"Hubo algún error. Inténtalo de nuevo más tarde.","discussionAdd.addLongContentError":"Tu mensaje es demasiado largo. Inténtalo de nuevo."}}')}}]);
//# sourceMappingURL=discussionsDetail~discussionsList~groupHome.85179c66.js.map